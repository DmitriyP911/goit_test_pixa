{"version":3,"sources":["webpack:///./templates/imageCard.hbs","webpack:///./index.js"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","url","key","page","searchForm","document","querySelector","input","ul","modalDiv","modalDivButton","modalImg","nextPicture","query","addEventListener","event","preventDefault","innerHTML","value","style","visibility","axios","get","then","response","hits","length","disabled","PNotify","error","pnotifySet","markup","reduce","acc","el","insertAdjacentHTML","text","delay","addClass","width","remove","stack","context","targets","getElementsByClassName","observer","IntersectionObserver","entries","resp","mark","root","rootMargin","threshold","closeModalWindow","setAttribute","forEach","target","observe","removeAttribute","className","src"],"mappings":"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","file":"main.25096f8679cee83bf938.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"photo-card\\\">\\r\\n    <img class=\\\"gallery__image\\\" src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"webformatURL\") || (depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":37},\"end\":{\"line\":2,\"column\":53}}}) : helper)))\n    + \"\\\" alt=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"tags\") || (depth0 != null ? lookupProperty(depth0,\"tags\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"tags\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":60},\"end\":{\"line\":2,\"column\":68}}}) : helper)))\n    + \"\\\" bigsrc=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"largeImageURL\") || (depth0 != null ? lookupProperty(depth0,\"largeImageURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"largeImageURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":78},\"end\":{\"line\":2,\"column\":95}}}) : helper)))\n    + \"\\\" />\\r\\n\\r\\n    <div class=\\\"stats\\\">\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons\\\">thumb_up</i>\\r\\n        </p>\\r\\n        <span>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"likes\") || (depth0 != null ? lookupProperty(depth0,\"likes\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":14},\"end\":{\"line\":8,\"column\":23}}}) : helper)))\n    + \"</span>\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons\\\">visibility</i>\\r\\n        </p>\\r\\n        <span>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"views\") || (depth0 != null ? lookupProperty(depth0,\"views\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":12,\"column\":14},\"end\":{\"line\":12,\"column\":23}}}) : helper)))\n    + \"</span>\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons\\\">comment</i>\\r\\n        </p>\\r\\n        <span>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"comments\") || (depth0 != null ? lookupProperty(depth0,\"comments\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":16,\"column\":14},\"end\":{\"line\":16,\"column\":26}}}) : helper)))\n    + \"</span>\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons\\\">cloud_download</i>\\r\\n        </p>\\r\\n        <span>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"downloads\") || (depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":20,\"column\":14},\"end\":{\"line\":20,\"column\":27}}}) : helper)))\n    + \"</span>\\r\\n    </div>\\r\\n</div>\";\n},\"useData\":true});","import './styles.css';\nimport axios from 'axios';\nimport PNotify from 'pnotify/dist/es/PNotify.js';\nimport template from './templates/imageCard.hbs';\n\nconst url = `https://pixabay.com/api/?image_type=photo&orientation=horizontal`;\nconst key = `&key=15900106-2c235e732bb321ca7ec900d93`;\nlet page = 1;\nconst perPage = `&per_page=12`;\n\nconst searchForm = document.querySelector( `.search-form` )\nconst input = document.querySelector( `input` );\nconst ul = document.querySelector( `.gallery` );\nconst modalDiv = document.querySelector( `.lightbox` );\nconst modalDivButton = document.querySelector( `button[data-action=\"close-lightbox\"]` );\nconst modalImg = document.querySelector( `.modal-img` );\nconst nextPicture = document.querySelector( `.add-more` );\nlet query = ``;\n\nsearchForm.addEventListener( `submit`, sendSubmit )\n\nconst pnotifySet = {\n    text: \"We did not find any pictures for your request\",\n    delay: 3000,\n    addClass: `warning`,\n    width: '250px',\n    remove: true,\n    stack: {\n        context: modalDiv\n    },\n}\n\nconst targets = document.getElementsByClassName( 'modal-img' );\n\nconst options = {\n    root: null,\n    rootMargin: '0px',\n    threshold: 0.5\n}\n\nvar loadImage = function ( entries, observer ) {\n    if( page > 1 ) {\n        page += 1;\n        axios.get( `${url}${query}&page=${page}${perPage}${key}` )\n            .then( ( resp ) => {\n                const data = resp.data.hits;\n                const mark = data.reduce( ( acc, el ) => acc + `<li class=\"image-card\">${template( el )}</li>`, `` );\n                ul.insertAdjacentHTML( `beforeend`, mark );\n            } );\n    }\n};\n\nconst observer = new IntersectionObserver( loadImage, options );\n\ntargets.forEach( target => {\n    observer.observe( target )\n} )\n\nnextPicture.addEventListener( `click`, addNewPictures );\n\nfunction sendSubmit () {\n    event.preventDefault();\n    ul.innerHTML = ``;\n    query = `&q=${input.value}`;\n    nextPicture.style.visibility = `hidden`;\n    axios.get( `${url}${query}&page=${page}${perPage}${key}` )\n        .then( response => {\n            const data = response.data.hits;\n            if( data.length >= 1 ) {\n                nextPicture.style.visibility = `visible`;\n            }\n            if( data.length < 11 ) {\n                nextPicture.disabled = true;\n            }\n            if( data.length === 0 ) {\n                PNotify.error( pnotifySet );\n            }\n            const markup = data.reduce( ( acc, el ) => acc + `<li class=\"image-card\">${template( el )}</li>`, `` );\n            ul.insertAdjacentHTML( `beforeend`, markup );\n        } )\n}\n\nfunction addNewPictures () {\n    page += 1;\n    axios.get( `${url}${query}&page=${page}${perPage}${key}` )\n        .then( ( resp ) => {\n            const data = resp.data.hits;\n            const mark = data.reduce( ( acc, el ) => acc + `<li class=\"image-card\">${template( el )}</li>`, `` );\n            ul.insertAdjacentHTML( `beforeend`, mark );\n        } );\n    nextPicture.removeAttribute( 'style' );\n}\n\nul.addEventListener( `click`, event => {\n    if( event.target.className === `gallery__image` ) {\n        modalDiv.setAttribute( `class`, `lightbox__overlay` );\n        modalDivButton.setAttribute( `class`, `lightbox__button` );\n        modalImg.setAttribute( `src`, `${event.target.src}` );\n    }\n} )\n\nmodalDivButton.addEventListener( `click`, closeModalWindow );\n\ndocument.addEventListener( `keyup`, event => {\n    if( event.key === `Escape` ) {\n        closeModalWindow();\n    }\n} );\n\nmodalDiv.addEventListener( `click`, ( event ) => {\n    if( event.target != modalImg ) {\n        closeModalWindow();\n    }\n} );\n\nfunction closeModalWindow () {\n    modalDiv.setAttribute( `class`, `` );\n    modalDivButton.setAttribute( `class`, `invisible` );\n    modalImg.setAttribute( `src`, `` );\n};"],"sourceRoot":""}